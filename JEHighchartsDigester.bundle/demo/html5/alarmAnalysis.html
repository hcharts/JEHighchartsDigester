<!DOCTYPE HTML>
<html>
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>Highcharts Example</title>
            <style type="text/css">

              #container {
                  background: url(resources/viewcontroller_background.png) repeat;
              }

            </style>
            <script type="text/javascript" src="../../js/jquery-1.9.0.js"></script>
            <script type="text/javascript">
                
                
                function combinationPlotFilled(columnData, pieData, allCount, month) {
                    var chart = $('#container').highcharts(),
                    inCome = columnData,
                    lenObj = inCome.length,
                    series1 = [],
                    series2 = [];
                    
                    chart.series[0].setData(inCome, true);
                    chart.series[1].setData(pieData, true);
                    chart.xAxis[0].setCategories(month, true);

                     if(allCount === 0) {
                        $(".highcharts-axis path").attr('stroke-width', 1);
                    } else {
                        $(".highcharts-axis path").attr('stroke-width', 0);
                    }

                     $(".highcharts-title tspan").eq(2).text(allCount);
                     
                }



            
            function mytitlePosition() {
                return $('#container').height() * 0.2;
            }
            
            
            function diameter() {
                if ($("#container").width() < $("#container").height()) {
                    var a = $("#container").width() * 7 / 10;
                    var b = $("#container").height() * 63.5 / 100;
                    if(a > b) {
                        return b*0.9;
                    }
                    return $("#container").width() * 7 / 10;
                } else {
                    return $("#container").height() * 7 / 10;
                }
            }
            
            function innerDiameter() {
                return diameter()/2;
            }
            
            function distance() {
                if ($(document).height() < $(document).width()) {
                    return -25;
                } else {
                    return -25;
                }
            }
            
            function diaCenter() {
                var a = $("#container").width() * 7 / 10;
                var b = $("#container").height() * 63.5 / 100;
                if(a > b) {
                    return ["45%", "10%"];
                }
                return ["45%", "15%"];
            }
            
            $(function() {
              
              $("#container").height($(document).height()*99.99/100);
              $("#container").width($(document).width()*99.99/100);
              
              
              $('#container').highcharts({
                                         
                                         title: {
                                         text: '报警总数<br>99',
                                         align: 'center',
                                         y: mytitlePosition(),
                                         x: 0,
                                         dy: 30
                                         },

                                         chart: {
             backgroundColor: 'transparent'
            },
                                         
                                         colors: ['#ff9a38', '#ffc444', '#fb8800', '#ffd427', '#ffa518', '#ea4e2f', '#d83717', '#ff6600', '#b048f2', '#f94c4d', '#14d18c'],

                                         xAxis: [{ // Primary xAxis
                                                 min: 0,
                                                 startOnTick: true,
                                                 lineWidth: 1,
                                                 offset: 0,
                                                 labels:{step:7}
                                                 }],
                                         
                                         yAxis: [
                                                 
                                                 { // Primary yAxis
                                                 top: 0,
                                                 title: {
                                                 text: ''
                                                 },
                                                 min: 0
                                                 }, { // Secondary yAxis
                                                 top: $("#container").height() * 63.5 / 100,
                                                 // min: 0,
                                                 height: $("#container").height() * 29 / 100,
                                                 //                bottom: 100,
                                                 title: {
                                                 text: '',
                                                 style: {
                                                 color: '#4572A7'
                                                 }
                                                 }
                                                 
                                                 }
                                                 ],
                                         
                                         tooltip: {
                                         pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                                         },
                                         plotOptions: {
                                         pie: {
                                         allowPointSelect: true,
                                         cursor: 'pointer',
                                         dataLabels: {
                                         enabled: true,
                                         distance: distance(),
                                         style: {
                                         fontWeight: 'normal',
                                         color: 'white',
                                         textShadow: null
                                         }
                                         },
                                         showInLegend: false,
                                         point: {
                                         events: {
                                         legendItemClick: function(e) {
                                         e.preventDefault();
                                         }
                                         }
                                         }
                                         },
                                         
                                         column: {
                                         width: 10,
                                         height: 10,
                                         depth: 10,
                                         showInLegend: false,
                                         borderWidth:0,
                                         color: '#63b8fa',
                                         marker: {
                                         enabled: false,
                                         symbol: 'circle',
                                         radius: 2,
                                         states: {
                                         hover: {
                                         enabled: true
                                         }
                                         }
                                         }
                                         }
                                         
                                         },
                                         
                                         series: [{ //柱状图
                                                  type: 'column',
                                                  name: 'Jane',
                                                  yAxis: 1,
                                                  //     xAxis: 1,
                                                  data: [5, 35, 5, 12, 15, 20, 46, 66, 34, 62, 34, 13, 56, 46, 66, 34, 62, 34, 13, 56, 5, 35, 5, 12, 15, 20, 46, 66, 34, 62, 11]
                                                  },
                                                  
                                                  
                                                  { //饼
                                                  yAxis: 0,
                                                  type: 'pie',
                                                  options3d: {
                                                  enabled: false,
                                                  alpha: 45
                                                  },
                                                  name:"占比",
                                                  borderWidth:0,
                                                  colorByPoint: true,
                                                  center: diaCenter(),
                                                  size: diameter(),
                                                  innerSize: innerDiameter(),
                                                  data: [['红外报警', 20],
                                                         ['煤气报警', 15]]
                                                  }
                                                  ]
                                         });
              
              $(".highcharts-axis path").attr('stroke-width', 0);
              $(".highcharts-title tspan").eq(0).css('fill', "#999999");
              $(".highcharts-title tspan").eq(1).css('fill', "#252525");
              $(".highcharts-title tspan").eq(2).css('fill', "#252525");
              
              $(".highcharts-title tspan").eq(0).css('font-size', '12px');
              $(".highcharts-title tspan").eq(1).css('font-size', '35px');
           //   $(".highcharts-title tspan").eq(2).css('font-size', '30px');
              $(".highcharts-title tspan").eq(1).attr('dy', 40);
              //$(".highcharts-series rect").attr('stroke-width', 0);
              
              });
              
                </script>
            </head>
    
    <body height="100%" style="zoom: 1;margin-left: 0px;margin-right: 0px;margin-top: 0px;margin-bottom: 0px;">
        <script src="../../js/highcharts/highcharts.js"></script>
        <div id="container" height="100% !important; " style="min-width: 100%; min-height:100%; !important; z-index:0 ">
        </div>
        
    </body>
</html>
